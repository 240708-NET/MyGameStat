name: FRONTEND Build and Deploy

#triggers
on:
  push:
  #conditions
    # Specify the branch that needs deployment (checkup)
    branches:
      - main
    # Specify the folder that trigger build and deployment on changes 
    paths:
      - /src/web/client/**
      
  pull_request:    
    branches:
      - main
    paths:
      - src/web/client/**
  workflow_dispatch:

# tasks to complete
jobs:
  #each job will run on a new vm(build agent)
  build:
    #what type of vm will this job be performed on
    runs-on: Linux-latest
    #what steps we take to complete the job
    steps:
    #instruction to tell the VM will be based on react
    - name: Setup react
      uses: actions/setup-npm
    # We tell the VM the source code
    - name: Checkout The Repo
      uses: actions/checkout@v4

     #install dependancies 
    - name: npm Restore
      run: npm restore ./src/web/client/

      #start building .net project
    - name: npm Build
      run:  npm build --no-restore ./src/web/client/
    
    # Test
    - name: npm Test
      run: npm test --no-build --verbosity normal ./src/web/client/
    
   

    # Deploy to azure web app
    